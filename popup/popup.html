<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PhishGuard</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="popup" id="popup">
      <!-- ===== Header ===== -->
      <header class="header">
        <div class="header__brand">
          <img
            class="header__icon"
            src="../assets/icon-128.png"
            alt="PhishGuard"
          />
          <h1 class="header__title">PhishGuard</h1>
          <span class="header__toggle-label" id="ext-toggle-label"
            >보호 중</span
          >
          <label class="toggle" title="PhishGuard 활성화/비활성화">
            <input type="checkbox" id="ext-toggle" checked />
            <span class="toggle__slider"></span>
          </label>
        </div>
        <p class="header__domain" id="current-domain">로딩 중...</p>
        <button class="llm-chip" id="llm-chip" title="AI 모델 설정">
          <span class="llm-chip__icon" id="llm-chip-icon"></span>
          <span class="llm-chip__text" id="llm-chip-text"
            >AI 검증 활성화하기</span
          >
        </button>
      </header>

      <!-- ===== Main Content ===== -->
      <main class="main" id="main-view">
        <!-- Risk Gauge -->
        <section class="gauge" id="gauge-section">
          <svg class="gauge__svg" viewBox="0 0 140 140">
            <defs>
              <filter id="glow">
                <feGaussianBlur stdDeviation="2.5" result="coloredBlur" />
                <feMerge>
                  <feMergeNode in="coloredBlur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <circle class="gauge__bg" cx="70" cy="70" r="56" />
            <circle
              class="gauge__fill"
              id="gauge-fill"
              cx="70"
              cy="70"
              r="56"
              filter="url(#glow)"
            />
            <text
              class="gauge__score"
              id="gauge-score"
              x="70"
              y="66"
              text-anchor="middle"
              dominant-baseline="middle"
            >
              --
            </text>
            <text
              class="gauge__label"
              id="gauge-label"
              x="70"
              y="90"
              text-anchor="middle"
            >
              분석 중
            </text>
          </svg>
          <p class="gauge__risk-text" id="gauge-risk-text">분석 중...</p>
        </section>

        <!-- Detector Results -->
        <section class="results" id="results-list">
          <p class="results__empty">분석 결과를 불러오는 중...</p>
        </section>
      </main>

      <!-- ===== Settings Panel (hidden by default) ===== -->
      <section class="settings" id="settings-panel">
        <h2 class="settings__title">설정</h2>

        <div class="settings__row">
          <span class="settings__row-label">PhishGuard 활성화</span>
          <label class="toggle">
            <input type="checkbox" id="settings-ext-toggle" checked />
            <span class="toggle__slider"></span>
          </label>
        </div>

        <div class="settings__row">
          <span class="settings__row-label">AI 분석 활성화</span>
          <label class="toggle">
            <input type="checkbox" id="settings-llm-toggle" />
            <span class="toggle__slider"></span>
          </label>
        </div>

        <div id="llm-settings-group">
          <label class="settings__label">LLM 제공자</label>
          <div class="model-picker" id="model-picker">
            <button
              class="model-picker__item"
              data-value="gemini"
              type="button"
            >
              <span class="model-picker__logo">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 28 28"
                  fill="none"
                  aria-hidden="true"
                >
                  <defs>
                    <linearGradient
                      id="gemini-grad"
                      x1="0"
                      y1="0"
                      x2="28"
                      y2="28"
                      gradientUnits="userSpaceOnUse"
                    >
                      <stop stop-color="#1BA1E3" />
                      <stop offset="0.3" stop-color="#5489D6" />
                      <stop offset="0.6" stop-color="#9B72CB" />
                      <stop offset="0.9" stop-color="#D96570" />
                      <stop offset="1" stop-color="#F49C46" />
                    </linearGradient>
                  </defs>
                  <path
                    d="M14 0C14 7.732 7.732 14 0 14c7.732 0 14 6.268 14 14 0-7.732 6.268-14 14-14-7.732 0-14-6.268-14-14z"
                    fill="url(#gemini-grad)"
                  />
                </svg>
              </span>
              <span class="model-picker__name">Gemini</span>
            </button>
            <button class="model-picker__item" data-value="glm" type="button">
              <span class="model-picker__logo">
                <svg
                  width="28"
                  height="28"
                  viewBox="0 0 30 30"
                  fill="none"
                  aria-hidden="true"
                >
                  <rect
                    x="1.49"
                    y="1.49"
                    rx="4"
                    width="27.02"
                    height="27.02"
                    fill="#16162b"
                  />
                  <path
                    d="M15.47,7.1l-1.3,1.85c-0.2,0.29-0.54,0.47-0.9,0.47h-7.1V7.09C6.16,7.1,15.47,7.1,15.47,7.1z"
                    fill="white"
                  />
                  <polygon
                    points="24.3,7.1 13.14,22.91 5.7,22.91 16.86,7.1"
                    fill="white"
                  />
                  <path
                    d="M14.53,22.91l1.31-1.86c0.2-0.29,0.54-0.47,0.9-0.47h7.09v2.33H14.53z"
                    fill="white"
                  />
                </svg>
              </span>
              <span class="model-picker__name">GLM</span>
            </button>
          </div>

          <label class="settings__label" for="api-key">API 키</label>
          <input
            class="settings__input"
            id="api-key"
            type="password"
            placeholder="API 키를 입력하세요"
            spellcheck="false"
            autocomplete="off"
          />

          <button class="settings__save" id="settings-save">저장</button>
        </div>

        <p class="settings__status" id="settings-status"></p>
      </section>

      <!-- ===== Footer ===== -->
      <footer class="footer">
        <span class="footer__text">PhishGuard v1.0</span>
        <button
          class="footer__settings-btn"
          id="settings-toggle"
          title="API 설정"
        >
          &#x2699;&#xFE0F;
        </button>
      </footer>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
